version: v1.0
name: Using execution_time_limit
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804


blocks:
  - name: Creating Docker Image
   prologue:
    task:
         # Set environment variables that your project requires.
         # See https://docs.semaphoreci.com/article/66-environment-variables-and-secrets
         env_vars:
           - name: NODE_ENV
             value: test
           - name: CI
          value: 'true'
      commands:
             # Get the latest version of our source code from GitHub:
          - checkout
  
      jobs:
      - name: Docker build
        commands:
           - cache restore
	   - npm install
            - cache store
          

  - name: Building executable
    task:
      jobs:
      - name: Building job
        commands: 
         - cache restore
          - npm test
          